(()=>{class e{constructor(e){this.items=document.querySelectorAll(".pricing-checkbox"),this.countItems=document.querySelectorAll(".service-header"),this.startPrice=+document.querySelector(".price-big").innerText.split("zł")[0],this.startMonthPrice=0,this.totalPrice=0,this.totalMonthPrice=0,this.priceTable=document.querySelector(".pricing-summary"),this.monthPriceTable=document.querySelector(".monthly"),this.assignEvents()}assignEvents(){this.checkAllPrices(),this.items.forEach(e=>{e.addEventListener("click",this.checkAllPrices.bind(this))}),this.countItems.forEach(e=>{let t=e.querySelector(".input-counter");if(t){let e=t.parentElement.querySelectorAll("a");e[0].addEventListener("click",this.changeAmount.bind(this,t,-1)),e[1].addEventListener("click",this.changeAmount.bind(this,t,1)),t.addEventListener("change",this.updateCheckboxState.bind(this,t))}e.addEventListener("click",this.checkAllPrices.bind(this))})}checkAllPrices(){console.log("checking prices"),this.totalPrice=this.startPrice,this.clearPriceTable(),this.totalMonthPrice=this.startMonthPrice,this.clearMonthPriceTable(),this.checkSinglePrices(),this.checkCounterPrices(),this.priceTable.querySelector(".summary-item-price.big").innerText=`${this.totalPrice} zł netto`,this.monthPriceTable.querySelector(".summary-item-price.big").innerText=`${this.totalMonthPrice} zł`}checkSinglePrices(){this.items.forEach(e=>{let t=e.querySelector("input[type=checkbox]").checked;if(t){let t=e.querySelector(".checkbox-title").innerText,i=e.querySelector(".service-price"),c=i?+i.innerText.split("zł")[0]:0,r=e.querySelector(".tag.alternative"),l=r?+r.innerText.split("zł")[0]:0;c&&(this.totalPrice+=c,this.addPriceToTable(t,c)),l&&(this.totalMonthPrice+=l,this.addMonthPriceToTable(t,l))}})}checkCounterPrices(){this.countItems.forEach(e=>{let t=e.querySelector("input[type=checkbox]").checked;if(t){let t=e.querySelector(".service-title").innerText,i=e.querySelector(".service-price-label"),c=i?+i.innerText.split("zł")[0]:0,r=e.querySelector(".input-counter"),l=r?+r.value:0;c&&l&&(this.totalPrice+=c*l,this.addPriceToTable(t,c*l))}})}addPriceToTable(e,t){const i=`<li class="summary-list-item"><div class="summary-item-name">${e}</div><div class="summary-item-price">${t} zł</div></li>`;this.priceTable.querySelector("ol").innerHTML+=i}addMonthPriceToTable(e,t){const i=`<li class="summary-list-item"><div class="summary-item-name">${e}</div><div class="summary-item-price">${t} zł</div></li>`;this.monthPriceTable.querySelector("ol").innerHTML+=i}clearPriceTable(){const e=this.priceTable.querySelector("ol").children[0].outerHTML;this.priceTable.querySelector("ol").innerHTML=e}clearMonthPriceTable(){this.monthPriceTable.querySelector("ol").innerHTML=""}changeAmount(e,t){let i=+e.value,c=i+t;e.value=c>-1?c:0,this.updateCheckboxState()}updateCheckboxState(e){let t=e.closest(".service-header").querySelector("input[type=checkbox]"),i=t.checked;e.value>0&&!i&&t.click(),e.value<=0&&i&&t.click()}}document.addEventListener("DOMContentLoaded",function(t){new e})})();