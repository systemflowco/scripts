(()=>{class e{constructor(e){this.items=document.querySelectorAll(".pricing-checkbox-header"),this.countItems=document.querySelectorAll(".checkbox-counter-value"),this.startPrice=0,this.startMonthPrice=+document.querySelector(".price-big").innerText.split("zł")[0],this.totalPrice=0,this.totalMonthPrice=0,this.priceTable=document.querySelector(".pricing-summary"),this.monthPriceTable=document.querySelector(".monthly"),this.payButton=document.querySelector("#payButton"),this.implementOptions=[],this.assignEvents()}assignEvents(){this.checkAllPrices(),this.items.forEach(e=>{e.querySelector(".w-checkbox").addEventListener("click",this.checkAllPrices.bind(this))}),this.countItems.forEach(e=>{let t=e.parentElement.querySelectorAll("a");t[0].addEventListener("click",this.changeAmount.bind(this,e,-1)),t[1].addEventListener("click",this.changeAmount.bind(this,e,1))})}checkAllPrices(){this.implementOptions=[],this.totalPrice=this.startPrice,this.clearPriceTable(),this.totalMonthPrice=this.startMonthPrice,this.clearMonthPriceTable(),this.checkSinglePrices(),this.priceTable.querySelector(".summary-item-price.big").innerText=`${this.totalPrice} zł netto`;let e=Math.round(1.23*this.totalPrice);this.payButton.href=`https://hook.eu1.make.com/vydbcv44aqwl14ojtgmlgmn182qgq36s?price=${e}&prod=prod_LEYwjHjQyDzxxU&options=${this.implementOptions.join()}&monthly=${this.totalMonthPrice}`,this.payButton.querySelector(".button-text-2").innerText=`Płacę ${e} zł (brutto)`,this.monthPriceTable.querySelector(".summary-item-price.big").innerText=`${this.totalMonthPrice} zł`,this.totalPrice?this.monthPriceTable.style.display="block":this.priceTable.style.display="none",this.totalMonthPrice?this.monthPriceTable.style.display="block":this.monthPriceTable.style.display="none"}checkSinglePrices(){this.items.forEach((e,t)=>{let i=e.querySelector("input[type=checkbox]").checked;if(i){let i=e.querySelector(".checkbox-custom-label").innerText,c=e.querySelector(".price-service"),r=c?+c.innerText:0,l=e.querySelector(".price-monthly"),s=l?+l.innerText:0,n=e.querySelector(".checkbox-counter-value"),o=n?+n.innerText:1;r&&(this.totalPrice+=r*o,this.addPriceToTable(o>1?i+" x "+o:i,r*o)),s&&(this.totalMonthPrice+=s*o,this.addMonthPriceToTable(o>1?i+" x "+o:i,s*o));for(let e=1;e<=o;e++)this.implementOptions.push(t+1)}})}addPriceToTable(e,t){const i=`<li class="summary-list-item"><div class="summary-item-name">${e}</div><div class="summary-item-price">${t} zł</div></li>`;this.priceTable.querySelector("ol").innerHTML+=i}addMonthPriceToTable(e,t){const i=`<li class="summary-list-item"><div class="summary-item-name">${e}</div><div class="summary-item-price">${t} zł</div></li>`;this.monthPriceTable.querySelector("ol").innerHTML+=i}clearPriceTable(){this.priceTable.querySelector("ol").innerHTML=""}clearMonthPriceTable(){const e=this.monthPriceTable.querySelector("ol").children[0].outerHTML;this.monthPriceTable.querySelector("ol").innerHTML=e}changeAmount(e,t){let i=+e.innerText,c=i+t;e.innerText=c>-1?c:0,c>0?e.parentElement.querySelector("a").classList.remove("disabled"):e.parentElement.querySelector("a").classList.add("disabled"),this.updateCheckboxState(e),this.checkAllPrices()}updateCheckboxState(e){let t=e.closest(".pricing-checkbox-header").querySelector("input[type=checkbox]"),i=t.checked;+e.innerText>0&&!i&&t.click(),+e.innerText<=0&&i&&t.click()}}document.addEventListener("DOMContentLoaded",function(t){new e})})();