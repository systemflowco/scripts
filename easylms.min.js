function onYouTubeIframeAPIReady(){$("iframe").each((e,s)=>{let t=$(s).attr("src");if(!t.includes("youtube"))return;const n=t.split("youtube.com%2Fembed%2F")[1].split("%3F")[0];t=`https://www.youtube.com/embed/${n}?enablejsapi=1&origin=${location.origin}&modestbranding=1&showinfo=0&rel=0`,$(s).attr("src",t),$(s).attr("id","dynamic"+e),createYoutubePlayer(s.id)})}function createYoutubePlayer(e){function s(e){setInterval(()=>{const e=n.getCurrentTime();$(document).trigger("videoProgress",e)},5e3),n.playVideo(),$(document).on("goToVideoSecond",(e,s)=>{n.seekTo(s)}),$(document).trigger("playerReady")}function t(e){e.data==YT.PlayerState.ENDED&&$(document).trigger("finishLesson")}let n=new YT.Player(e,{playerVars:{showInfo:0,modestbranding:1},events:{onReady:s,onStateChange:t}})}(()=>{function e(){const e=document.querySelector(".continue-banner"),s="LESSON.LAST";let t="";t=window.easyJSON&&window.easyJSON[s]?JSON.parse(window.easyJSON[s]):JSON.parse(localStorage.getItem(s)),t?(e.href=`./lekcje/${t.lessonSlug}`,e.querySelector(".continue-course-name-span").innerText=t.course,e.querySelector(".continue-lesson-name-span").innerText=t.lesson):e.style.display="none"}document.addEventListener("DOMContentLoaded",function(s){void 0===easy_json?e():window.easyJSON?e():$(document).on("easyJsonReady",e)})})();const ej_api="https://app.easytools.pl/api/json",easy_json={logged(){const e=easy_json.getProductId();return window._EC_USER_ID&&window[e]},getProductId:()=>Object.keys(window).filter(function(e){return~e.indexOf("_EC_")&&!~e.indexOf("_EC_USER_ID")}),async patch(e,s=!1){if(!easy_json.logged())return;const t=window._EC_USER_ID,n=easy_json.getProductId()[0];let o=e;s||(o={...window.easyJSON,...e});const i=await fetch(`${ej_api}/${t}`,{mode:"cors",method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:JSON.stringify(o),stripeId:n})}),{data:a}=await i.json();return window.easyJSON=a,a},async get(){if(!easy_json.logged())return;const e=window._EC_USER_ID,s=easy_json.getProductId()[0],t=await fetch(`${ej_api}/${e}?stripeId=${s}`,{mode:"cors",method:"GET",headers:{"Content-Type":"application/json"}}),n=await t.json();window.easyJSON=n}};easy_json.get().then(()=>{$(document).trigger("easyJsonReady"),console.log("Easy Json Ready")}).catch(()=>{$(document).trigger("easyJsonReady")}),(()=>{class e{constructor(e){this.pathname=location.pathname,this.slug=this.pathname.match(/(?<=lekcje\/).+/)[0],this.finishBtn=document.querySelector("[data-lms-finish-btn]"),this.finishedBtn=document.querySelector("[data-lms-finished-btn]"),this.nextLessonBtn=document.querySelector("[data-lms-next-btn]"),this.autoplayBtn=document.querySelector("[data-lms-autoplay-btn] input"),this.lessons=document.querySelectorAll(".course-content-lesson"),this.lessonTitle=document.querySelector(".course-content-lesson.w--current .lesson-name").innerText,this.courseTitle=document.querySelector(".course-title-progress").innerText,this.KEY_FINISH="LESSON.FINISH",this.KEY_LAST="LESSON.LAST",this.KEY_AUTOPLAY="LESSON.AUTOPLAY",this.autoplayMode=!1,this.finishedLessons=[],this.lastLesson="",this.assignEvents()}assignEvents(){this.saveLastLesson(),void 0===easy_json?this.checking():window.easyJSON?this.checking():$(document).on("easyJsonReady",this.checking.bind(this)),this.finishBtn.addEventListener("click",this.toggleFinishStatus.bind(this)),$(document).on("finishLesson",this.finishLesson.bind(this)),$(document).on("nextLesson",this.goToNextLesson.bind(this)),$(document).on("videoProgress",(e,s)=>{this.updateLastLessonProgress(s)}),$(document).on("playerReady",this.checkLastLesson.bind(this))}checking(){this.checkIfAutoplay(),this.checkIfFinished(),this.checkAllLessons()}checkLastLesson(){this.lastLesson=this.readLsAndEj(this.KEY_LAST),this.lastLesson&&this.lastLesson.lessonSlug==this.slug&&this.lastLesson.progress&&$(document).trigger("goToVideoSecond",this.lastLesson.progress)}saveLastLesson(){this.saveLsAndEj(this.KEY_LAST,{lesson:this.lessonTitle,lessonSlug:this.slug,course:this.courseTitle})}updateLastLessonProgress(e){this.saveLsAndEj(this.KEY_LAST,{lesson:this.lessonTitle,lessonSlug:this.slug,course:this.courseTitle,progress:Math.round(e)})}checkIfAutoplay(){this.autoplayMode=this.readLsAndEj(this.KEY_AUTOPLAY)||!1,setTimeout(()=>{this.autoplayMode&&this.autoplayBtn.click(),this.autoplayBtn.addEventListener("click",this.toggleAutoplayMode.bind(this))},500)}toggleAutoplayMode(){this.autoplayMode=!this.autoplayMode,this.saveLsAndEj(this.KEY_AUTOPLAY,this.autoplayMode)}goToNextLesson(){this.nextLessonBtn.click()}checkIfFinished(){this.finishedLessons=this.readLsAndEj(this.KEY_FINISH)||[],this.finishedLessons.indexOf(this.slug)>-1&&this.toggleFinishStatus()}checkAllLessons(){let e=0;this.lessons.forEach(s=>{s.slug=s.href.match(/(?<=lekcje\/).+/)[0],this.finishedLessons.indexOf(s.slug)>-1&&(s.querySelector(".not-done").style.display="none",s.querySelector(".is-done").style.display="block",e++)});const s=Math.round(e/this.lessons.length*100);document.querySelector(".course-progress-circle-text").innerText=`${s}%`;const t=document.querySelector(".progress-ring__circle"),n=t.r.baseVal.value,o=2*n*Math.PI;t.style.strokeDasharray=`${o} ${o}`,t.style.strokeDashoffset=o;const i=o-s/100*o;t.style.strokeDashoffset=i}toggleFinishStatus(){this.finishBtn.style.display="none",this.finishedBtn.style.display="flex",-1==this.finishedLessons.indexOf(this.slug)&&this.finishedLessons.push(this.slug),this.checkAllLessons(),this.saveLsAndEj(this.KEY_FINISH,this.finishedLessons)}finishLesson(){this.toggleFinishStatus(),this.autoplayMode&&setTimeout(()=>{$(document).trigger("nextLesson")},1e3)}saveLsAndEj(e,s){const t={};t[e]=JSON.stringify(s),localStorage.setItem(e,t[e]),void 0!==easy_json&&easy_json.patch(t)}readLsAndEj(e){if(window.easyJSON&&window.easyJSON[e]){let s=window.easyJSON[e];return localStorage.setItem(e,s),JSON.parse(s)}return JSON.parse(localStorage.getItem(e))}}document.addEventListener("DOMContentLoaded",function(s){new e})})(),(()=>{function e(){$("iframe").each((e,t)=>{let n=$(t).attr("src");if(!n.includes("vimeo"))return;const o=n.split("vimeo.com%2Fvideo%2F")[1].split("%3F")[0];n=`https://player.vimeo.com/video/${o}?embedded=true`,$(t).attr("src",n),$(t).attr("id","dynamic"+e),s(t.id)})}function s(e){var s=new Vimeo.Player(e);setInterval(()=>{s.getCurrentTime().then(function(e){$(document).trigger("videoProgress",e)})},5e3),s.play(),$(document).on("goToVideoSecond",(e,t)=>{s.setCurrentTime(t)}),$(document).trigger("playerReady"),s.on("ended",function(){$(document).trigger("finishLesson")})}const t=[...document.querySelectorAll("iframe")].filter(e=>e.src.includes("vimeo")).length;if(!t)return;const n=document.createElement("script");n.src="https://player.vimeo.com/api/player.js";var o=document.getElementsByTagName("script")[0];o.parentNode.insertBefore(n,o),n.addEventListener("load",e)})(),(()=>{const e=[...document.querySelectorAll("iframe")].filter(e=>e.src.includes("youtube")).length;if(!e)return;const s=document.createElement("script");s.src="https://www.youtube.com/iframe_api";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(s,t)})();