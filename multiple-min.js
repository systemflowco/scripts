(()=>{class e{constructor(e){this.multiple=e,this.select=this.multiple.querySelector("[data-sysflow-multiple-select]"),this.options=this.select.querySelectorAll("option"),this.tags=this.multiple.querySelector("[data-sysflow-multiple-tags]"),this.list=this.multiple.querySelector("[data-sysflow-multiple-list]"),this.selected=[],this.assignEvents()}assignEvents(){this.clearTags(),this.createList()}createList(){this.list.innerHTML="",this.options.forEach((e,t)=>{this.list.innerHTML+=`<div class="dropdown-menu-item w-dropdown-link" data-index="${t}" data-value="${e.value}">${e.innerText}</div>`}),[...this.list.children].forEach((e,t)=>{e.addEventListener("click",s=>{this.toggleOption(e,t)})})}clearTags(){this.tags.innerHTML=""}toggleOption(e,t){this.selected.indexOf(t)>-1?(this.options[t].selected=!1,this.selected.splice(this.selected.indexOf(t),1),e.classList.remove("selected"),this.removeFromTags(t)):(this.options[t].selected=!0,this.selected.push(t),e.classList.add("selected"),this.addToTags(e,t))}removeFromTags(e){this.tags.querySelector(`[data-index="${e}"]`).remove()}addToTags(e,t){let s=document.createElement("div");s.classList.add("tag"),s.setAttribute("data-index",t),s.innerHTML=`${e.innerText} <span class="material-icons icon-right">close</span>`,s.addEventListener("click",s=>{s.stopPropagation(),s.preventDefault(),this.toggleOption(e,t)},!0),["momusedown","mouseup"].forEach(e=>s.addEventListener(e,e=>{e.stopPropagation(),e.preventDefault()},!0)),this.tags.append(s)}}const t=document.querySelectorAll("[data-sysflow-multiple]");t&&t.forEach(t=>{new e(t)})})();