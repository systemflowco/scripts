(()=>{class e{constructor(e){this.searchInput=e,this.container=this.searchInput.closest(".container"),this.collectionItems=this.container?this.container.querySelectorAll(".w-dyn-item"):null,this.cards=this.container?this.container.querySelectorAll(".cards"):null,this.textSelectors="h1, h2, h3, h4, h5, h6, p",this.assignEvents()}assignEvents(){this.collectionItems&&this.collectionItems.length&&(this.cards=this.collectionItems),this.cards&&(this.searchInput.addEventListener("keyup",this.searchResults.bind(this)),this.searchInput.addEventListener("keypress",function(e){"Enter"===e.key&&e.preventDefault()}))}searchResults(){this.queryText=this.searchInput.value.toLowerCase(),this.queryText.length>0?this.cards.forEach(e=>{const t=e.textContent;t.toLowerCase().indexOf(this.queryText)>-1?(delete e.dataset.searchHide,e.dataset.filterHide||(e.style.display="flex"),this.showResult(e)):(e.style.display="none",e.dataset.searchHide=!0)}):this.clearSearch()}showResult(e){const t=e.querySelectorAll(this.textSelectors);t.forEach(e=>{e.innerHTML=this.highlightText(e.innerText)})}hideResult(e){const t=e.querySelectorAll(this.textSelectors);t.forEach(e=>{e.innerHTML=e.innerText})}clearSearch(){this.cards.forEach(e=>{e.dataset.searchHide&&(delete e.dataset.searchHide,e.dataset.filterHide||(e.style.display="flex")),this.hideResult(e)})}highlightText(e){const t=new RegExp(`(${this.queryText})`,"gi");return e.replace(t,"<span style='background: yellow'>$1</span>")}}document.addEventListener("DOMContentLoaded",function(t){const s=document.querySelectorAll("[data-sysflow-cards-search]");s&&s.forEach(t=>{new e(t)})})})();